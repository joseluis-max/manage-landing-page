---
const socialIcons = [
  { name: 'Facebook', icon: '/images/icon-facebook.svg' },
  { name: 'YouTube', icon: '/images/icon-youtube.svg' },
  { name: 'Twitter', icon: '/images/icon-twitter.svg' },
  { name: 'Pinterest', icon: '/images/icon-pinterest.svg' },
  { name: 'Instagram', icon: '/images/icon-instagram.svg' }
];
---

<footer class="footer" id="careers">
  <div class="container">
    <div class="footer-brand">
      <a href="/" class="footer-logo">
        <img src="/images/logo.svg" alt="Manage" />
      </a>
      <div class="social-icons">
        {socialIcons.map((social) => (
          <a href="#" aria-label={social.name} class="social-icon">
            <img src={social.icon} alt="" />
          </a>
        ))}
      </div>
    </div>
    
    <nav class="footer-nav">
      <ul>
        <li><a href="#">Home</a></li>
        <li><a href="#">Pricing</a></li>
        <li><a href="#">Products</a></li>
        <li><a href="#">About Us</a></li>
      </ul>
    </nav>
    
    <nav class="footer-nav">
      <ul>
        <li><a href="#">Careers</a></li>
        <li><a href="#">Community</a></li>
        <li><a href="#">Privacy Policy</a></li>
      </ul>
    </nav>
    
    <div class="footer-newsletter">
      <div class="newsletter-wrapper">
        <form class="newsletter-form" id="newsletter-form" novalidate>
          <input 
            type="email" 
            id="newsletter-email"
            placeholder="Updates in your inboxâ€¦" 
            aria-label="Email address"
            aria-describedby="email-error"
          />
          <button type="submit" class="btn btn-primary">Go</button>
        </form>
        <span class="email-error" id="email-error" role="alert"></span>
      </div>
      <p class="copyright">Copyright 2020. All Rights Reserved</p>
    </div>
  </div>
</footer>

<script>
  const form = document.getElementById('newsletter-form') as HTMLFormElement | null;
  const emailInput = document.getElementById('newsletter-email') as HTMLInputElement | null;
  const errorMessage = document.getElementById('email-error') as HTMLSpanElement | null;
  
  if (form && emailInput && errorMessage) {
    form.addEventListener('submit', (e) => {
      e.preventDefault();
      
      const email = emailInput.value.trim();
      
      // Clear previous error
      errorMessage.textContent = '';
      emailInput.classList.remove('error');
      
      // Check if empty
      if (email === '') {
        errorMessage.textContent = 'Please insert a valid email';
        emailInput.classList.add('error');
        return;
      }
      
      // Check email format
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email)) {
        errorMessage.textContent = 'Please insert a valid email';
        emailInput.classList.add('error');
        return;
      }
      
      // Success - you can add success handling here
      emailInput.value = '';
      errorMessage.textContent = '';
      emailInput.classList.remove('error');
    });
    
    // Clear error on input
    emailInput.addEventListener('input', () => {
      if (emailInput.classList.contains('error')) {
        errorMessage.textContent = '';
        emailInput.classList.remove('error');
      }
    });
  }
</script>

<style lang="scss">
  @import '../styles/variables';
  
  .footer {
    background-color: hsl(233, 12%, 13%);
    padding: 3rem 0 2rem;
    color: white;
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1.5rem;
      display: grid;
      grid-template-columns: 1fr 1fr 1fr 1.5fr;
      gap: 2rem;
      
      @media (max-width: 768px) {
        grid-template-columns: 1fr;
        gap: 2.5rem;
        text-align: center;
      }
    }
  }
  
  .footer-brand {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    gap: 3rem;
    
    @media (max-width: 768px) {
      flex-direction: column-reverse;
      gap: 3rem;
      order: 3;
    }
  }
  
  .footer-logo {
    img {
      filter: brightness(0) invert(1);
      height: 1.5rem;
      
      @media (max-width: 768px) {
        margin: 0 auto;
      }
    }
  }
  
  .social-icons {
    display: flex;
    gap: 1rem;
    
    @media (max-width: 768px) {
      justify-content: center;
      gap: 2.5rem;
    }
  }
  
  .social-icon {
    img {
      height: 1.25rem;
      width: 1.25rem;
      transition: filter 0.3s ease;
      
      @media (max-width: 768px) {
        height: 2rem;
        width: 2rem;
      }
    }
    
    &:hover img {
      filter: brightness(0) saturate(100%) invert(60%) sepia(77%) saturate(2776%) hue-rotate(343deg) brightness(99%) contrast(96%);
    }
  }
  
  .footer-nav {
    @media (max-width: 768px) {
      &:nth-of-type(1) {
        order: 1;
      }
      
      &:nth-of-type(2) {
        order: 2;
      }
    }
    
    ul {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      
      @media (max-width: 768px) {
        gap: 0.75rem;
      }
    }
    
    a {
      color: white;
      font-size: 0.875rem;
      transition: color 0.3s ease;
      
      &:hover {
        color: $color-orange-400;
      }
    }
  }
  
  .footer-newsletter {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    gap: 2rem;
    
    @media (max-width: 768px) {
      order: 0;
      gap: 3rem;
    }
  }
  
  .newsletter-wrapper {
    position: relative;
  }
  
  .newsletter-form {
    display: flex;
    gap: 0.5rem;
    
    input {
      flex: 1;
      padding: 0.75rem 1.5rem;
      border-radius: 2rem;
      border: none;
      font-family: inherit;
      font-size: 0.875rem;
      transition: border 0.3s ease;
      
      &::placeholder {
        color: hsl(227, 12%, 61%);
      }
      
      &:focus {
        outline: 2px solid $color-orange-400;
      }
      
      &.error {
        outline: 2px solid hsl(12, 88%, 59%);
        color: hsl(12, 88%, 59%);
      }
    }
  }
  
  .email-error {
    display: block;
    color: hsl(12, 88%, 59%);
    font-size: 0.75rem;
    font-style: italic;
    margin-top: 0.5rem;
    margin-left: 1.5rem;
    min-height: 1rem;
  }
  
  .btn {
    padding: 0.75rem 1.75rem;
    border-radius: 2rem;
    font-weight: $font-weight-medium;
    font-size: 0.875rem;
    transition: all 0.3s ease;
    white-space: nowrap;
    
    &-primary {
      background-color: $color-orange-400;
      color: white;
      
      &:hover {
        opacity: 0.8;
      }
    }
  }
  
  .copyright {
    color: hsl(227, 12%, 61%);
    font-size: 0.75rem;
    text-align: center;
  }
</style>
